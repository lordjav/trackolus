{% extends "layout.html" %}

{% block main %}

<form id="purchase-form">
    <input type="text" class="form" id="client-name" autofocus placeholder="Client">
    <div id="phone-email">
        <input type="number" class="form" id="client-phone" placeholder="Contact phone">
        <input type="email" class="form" id="client-email" placeholder="E-mail">
    </div>
    <br>
    <form class="search-container" id="search-box-2" action="/purchase_order" method="get">
        <input type="search" list="products" class="form" id="search2" name="q" placeholder="Search by SKU code or name" autocomplete="off">
        <datalist id="products">
            {% for product in inventory %}
            <option id="{{ product['id'] }}">{{ product["SKU"] }}: {{ product["product_name"] }}</option>
            {% endfor %}
        </datalist>
        <input class="go-buttons" id="go-button-2" type="submit" value="&#10140;">
    </form>
    <div>
        <div class="p-2">
            <table class="table table-striped table-secondary table-borderless" id="purchase-cart">
                <thead class="table-light">
                    <tr>
                        <th>SKU</th>
                        <th>Product name</th>
                        <th>Quantity</th>
                        <th>Price (unit)</th>
                        <th>Total price</th>
                        <th>Remove</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
    <div id="buttons-purchase-container">
        <a href="">
            <button class="menu-button purchase-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="33" height="33" viewBox="0 0 24 24"><g fill="none" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" color="black"><path d="M3.5 13v-.804c0-2.967 0-4.45.469-5.636c.754-1.905 2.348-3.407 4.37-4.118C9.595 2 11.168 2 14.318 2c1.798 0 2.698 0 3.416.253c1.155.406 2.066 1.264 2.497 2.353c.268.677.268 1.525.268 3.22V13"/><path d="M3.5 12a3.333 3.333 0 0 1 3.333-3.333c.666 0 1.451.116 2.098-.057a1.67 1.67 0 0 0 1.179-1.18c.173-.647.057-1.432.057-2.098A3.333 3.333 0 0 1 13.5 2m-10 20v-3m0 0v-1.8c0-.566 0-.848.176-1.024C3.85 16 4.134 16 4.7 16h.8a1.5 1.5 0 0 1 0 3zm17-3H19c-.943 0-1.414 0-1.707.293S17 17.057 17 18v1m0 3v-3m0 0h2.5M14 19a3 3 0 0 1-3 3c-.374 0-.56 0-.7-.08c-.333-.193-.3-.582-.3-.92v-4c0-.338-.033-.727.3-.92c.14-.08.326-.08.7-.08a3 3 0 0 1 3 3"/></g></svg>
                View PDF
            </button>
        </a>
        <a href="">
            <button class="menu-button purchase-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="33" height="33" viewBox="0 0 24 24"><path fill="none" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 4H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.828a2 2 0 0 0-.586-1.414l-1.828-1.828A2 2 0 0 0 16.172 4H15M8 4v4a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V4M8 4h7M7 17v-3a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v3"/></svg>
                Save order
            </button>
        </a>
    </div>
</form>

<script>
  let option = document.querySelector("option");
  option.addEventListener("click", addToCart());

  function addToCart() {
    let table = getElementById("purchase-cart");
    let row = table.insertRow(0);
    let cell0 = row.insertCell(0);
    let cell1 = row.insertCell(1);
    let cell2 = row.insertCell(2);
    let cell3 = row.insertCell(3);
    let cell4 = row.insertCell(4);
    let cell5 = row.insertCell(5);

    let product_id = '{{ inventory[0]["id"] }}'

    cell0.innerHTML = '{{ inventory[0]["SKU"] }}';
    cell1.innerHTML = '{{ inventory[0]["product_name"] }}';
    cell2.innerHTML = '<input type="number" id="purchase-quantity-' + product_id + 'name="purchase-quantity" value="1" min="1" max="10">';
    cell3.innerHTML = '{{ inventory[0]["sell_price"] }}';
    cell4.innerHTML = '{{ inventory[0]["sell_price"] }}';
    cell5.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path fill="none" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4 6h16l-1.58 14.22A2 2 0 0 1 16.432 22H7.568a2 2 0 0 1-1.988-1.78zm3.345-2.853A2 2 0 0 1 9.154 2h5.692a2 2 0 0 1 1.81 1.147L18 6H6zM2 6h20m-12 5v5m4-5v5"/></svg>';
  };
</script>
{% endblock %}